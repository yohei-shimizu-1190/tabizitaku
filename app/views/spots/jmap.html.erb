<div class="container pt-4">
  <h1 class="mb-5 text-center text-secondary">日本地図で場所を覚える</h1>
  <h4 class="pb-3 text-primary">世界遺産によってはピンポイントで示せない場所もあるので、関連が深い場所を表示しています</h4>
  <p>（マウスカーソルをピンの上に置くと、世界遺産の登録名称を確認できます）</p>
  <div id="target"></div>
</div>

<style>
#target {
  width: 100%;
  height: 600px;
}
</style>


<script>
  function initMap() {
    var latlng = new google.maps.LatLng(35.7156, 139.776);
    var target = document.getElementById('target');

    var map = new google.maps.Map(target, {
      center: latlng,
        zoom: 6,
        clickableIcons: false
      });

    <% @spots.each do |spot| %>
      (function () {
        
        var marker = new google.maps.Marker({
          position: {lat: <%= spot.latitude %>, lng: <%= spot.longitude %>},
          map: map,
          title: "<%= spot.name %>",
          // label: {
          //   text: "<%= spot.name %>" ,
          //   color: "brown" ,
          //   fontSize: "12px" ,
          //   fontWeight: "bold"
          // },
          icon: {
            url: "https://maps.google.com/mapfiles/ms/micons/red-dot.png",
          },
          animation: google.maps.Animation.BOUNCE
        });
        var infoWindow = new google.maps.InfoWindow({
          position: {lat: <%= spot.latitude %>, lng: <%= spot.longitude %>},
          content: "<%= spot.address %>",
          pixelOffset: new google.maps.Size( 0, -50 )
          });
        infoWindow.open(map);
          
      })();
    <% end %>
  }
</script>

<script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyBsbAlSkry5YQYYQFHOYpLCtzjvQeqqqUw&callback=initMap" async defer></script>
