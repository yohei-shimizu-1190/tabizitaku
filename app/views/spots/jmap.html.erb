<div class="container">
  <h2> Google Map</h2>
  <p class="text-warning">localhost でアクセス可能にしてあるためデプロイ時注意。詳細はBMのデプロイ時注意とあるページへ</p>
  <p class="text-warning">APIキーをこのディレクトリ内に記載しているため注意！環境変数必要か？</p>
  <div id="target"></div>
</div>

<style>
#target {
  width: 100%;
  height: 400px;
}
</style>

<script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyBsbAlSkry5YQYYQFHOYpLCtzjvQeqqqUw&callback=initMap" async defer></script>

<script>
  function initMap() {
      var latlng = new google.maps.LatLng(36.30, 139.5);
      var target = document.getElementById('target');

    var map = new google.maps.Map(target, {
        center: latlng,
        zoom: 8,
        mapTypeId: 'hybrid',
        clickableIcons: false
      });

    <% @spots.each do |spot| %>
      (function () {
        var infoWindow = new google.maps.InfoWindow({
          content: "<%= spot.address %>",
          pixelOffset: new google.maps.Size( 0, -50 )
          });

        var marker = new google.maps.Marker({
          position: {lat: <%= spot.latitude %>, lng: <%= spot.longitude %>},
          map: map,
          icon: {
            url: "https://maps.google.com/mapfiles/ms/micons/red-dot.png",
          },
          animation: google.maps.Animation.BOUNCE
        });
        
        infoWindow.open(map);
          
      })();
    <% end %>
  }
</script>


savapoint!!!!!